use std::time::Instant;

const INPUT: [&[u8]; 323] = [b"...#.....#.......##......#.....",b"...#..................#........",b"....##....#.......#............",b".........#.......#.......#.....",b"..#..............#.........#..#",b".....#.........#....#....#....#",b"....##..........#.#.##.........",b"...#....##...#...#...#.#..#....",b"...#.......###..........#......",b".........#.....#....#...#.#....",b".#...###..#..##..#.........###.",b"#.#...#..........###...#....#..",b"#....#.#..#..........#.......#.",b".#..#........##.#..............",b"............#..#.#............#",b".............#..........#......",b"...#.......#...............#...",b".#...#..#..#............#..#...",b"....##.##..................#.##",b"#......#...#..##....#.....#...#",b"#..#..........##....#...###....",b"##......#.##.#......#..#......#",b"....#...#.......##.##...#.#..#.",b"##.#...#....#...#...#........#.",b"........#..#.....#....#.......#",b".#......#......#..............#",b".#.....#..#..#..#..#..#....#..#",b".......#.....#.................",b".#......#...#..#..#...#...#....",b".........#..#..#.........#.....",b".....#.........#.#..........#..",b"#......#....#....##....#.#.#...",b"................##.#...........",b".....##.....#............#.#...",b"...........#...#.#..##...#.....",b".......#....##.......#..#....#.",b".##......##....#....####.##..#.",b".....#.##.....#...#....##......",b".............#....#......#....#",b"#.#.#.###........#.#....#.#....",b".##...........#................",b"#..#..#...##..##.##...#..#.#...",b"..#......##..#.#......#..#.#.#.",b".....#..............#......#...",b"#.#..##.##...#............##...",b".#......#.............#........",b"........##....#......#..#......",b"##.........##....#..........#..",b"..#..#....#.........##....#..#.",b"........#..#..#........#...#...",b"#.........#......##.#...#.##...",b".##.............#..###....#.##.",b".##.#....#.......#.............",b"#..##.#.........#..##.#......##",b"....#..#.......................",b".#.#.........#...............#.",b"....#......#.#..##..#...#.#..#.",b"#....##...##..#.......##.....##",b"....##...##...#....#.....#..#..",b".#......#.#.#.#......##..#..#..",b".....##..#..#.....#.....#...##.",b"....###................#..#.#..",b".....#..#..#.#..........#..#...",b"...#.....#............#........",b"#.............#...#..#.....#..#",b"#........#.....#.#..#......#...",b"...#.##.....#.#..#.........#..#",b".......##...#..#.#....##.......",b"..................#..##..#.#.#.",b"..#......#..#..#.....#...#.#...",b".#.......#.....#.#....#.#......",b"##..#.#....#.###..#...#.......#",b".......................#.......",b"..###..........#..##.##.#...##.",b".....#...#....###.........#..#.",b"..#.....#....###...............",b"....#.......#........#....#..#.",b"......#................#.#...##",b"#.....#.......#..#..........##.",b"#.#....##.........#.....#.#....",b"#.#.#...#............####.##..#",b".....#....####........#...#..#.",b"....##........#.#..............",b".#......#..#..##......#....#.##",b"..#....#.#........#..#....#....",b".#...#.##...#.#.....#.....#...#",b"..........#................###.",b".....#..........##..#..........",b".....#..................#...#..",b"#......##....#.#...#..#.......#",b"..#......##....#......#.#...#..",b"###.#..###.#.#..#...#....#.....",b"#.....#.#...#.##...#........#..",b"#..........................#...",b".#.#.....#.#.#.......##.#.#....",b".#....#..##......#....#........",b".#.......#.##......#.#..#......",b"............#.....#....##.##...",b"....##........##......#........",b"....#......##....##.....#......",b"..#.#.....#......#...#.#.......",b".###.........#...#........#....",b"......#.#...##.....##..##..#...",b"...#...#.#......#..##..#.......",b".##....#.#........#.#..........",b"#....#.#......#......#.#.#.....",b"#.....#.....#................##",b"...........#....#...#...#......",b"..........##..##..#...##.......",b".##......#.......#..#.#..##....",b"..........##....#....#..#.#....",b"...............#......#.....##.",b".#...#....................#..#.",b".............###...............",b".####..............#...#.......",b"....#...#.#...#...#....#.......",b".......#.#.....................",b"...............................",b"#..#.........##.......#.#.#....",b"....##...#...........#......#..",b"........##...#......#..........",b"....#.#.....#..#......#........",b"#..#................#..#.##....",b".#........#.......#.........##.",b"#...........#...#...#......#.#.",b"..#.#.#..........##.##...#...#.",b"..#...#.##...#.#...........#...",b"##...........##...##...##......",b"....#....##...#......#..#.....#",b"#..#.#.#..#...#...#....#.......",b"............#.....#....#....#.#",b"....##.....#.........#......#..",b".....##.......#...#...#.###....",b"...##......##..###.#.#....#....",b"#.#.#.#..#.#.........#...#...##",b"..#..........#.................",b"....##....#....................",b"###.#...............##...##.#..",b"....#.......##.#..#.#..........",b"............##..#.......##.....",b"#...#.........#..#..#..#...#...",b"..#......##..#.#...##.#.......#",b"......#................#...#...",b"......#..###............#.#....",b"..#.#...###...#..#...#......##.",b"...#.##...##............#......",b"#...##........#.#..#.......#...",b"#..#.....#..#.##...............",b"..#.....#.#....#.........#.....",b".............#....#..#...#.##..",b"..#.#.....................##.#.",b"........#.......#..#.#.........",b"##..............#.....#.......#",b".#.##...###....#.....#..##.#...",b"#..#...#..#......#..........###",b"#...........#..#...#....#....#.",b"....#..#.......##......#......#",b"#...#.#...............##...#...",b"...##.#..##.......##..#........",b"...........##..........#.......",b"..#....#..##...#......#.#......",b".#.#....#.#.#...#.#............",b".#.#..#...##.......#.#.........",b"...#...#.............#.######..",b"##.#........###.......#....#.#.",b".#....#.....#.#........#......#",b"..#.#.........#..........##.#..",b".#....#.#..............#......#",b".....#..##.........#..##..#....",b"........#..#....#.......#.....#",b"#.#.......#.....#.##.#...#....#",b"...#...##...#....#.....#....#.#",b"#..##....#..........#..#.......",b".......#.#.....#...#.#.#.....##",b"#...#...#..#......##.#..#......",b"...#.......#....#...........#.#",b"##.......#####.#.........#..#..",b"....#.#...................##...",b"......#..##............#.......",b"#.........#....#####.#.#..#.#..",b"..#......#.#.##............#...",b"..#...#.....#.#....#......#....",b".#...#....#....#.#.#......#.#..",b"..#.##.....#..........#...#.#..",b".......#...#.............#...#.",b".#.........#.....#.#........##.",b"#....#..#..........##.......##.",b"...#....#.#.........#.......###",b"......#....#.#......#.......#..",b".....#...#...#.#...##..#.#.....",b"#.........##..#...##..#.#....#.",b"...#......#.#......##.....#....",b".#####.....#.#.#.#...###.##....",b"..#................#.#...#.#...",b"#.......##...#.........##..#...",b"..#.....#....##............#...",b"#............##...............#",b"..#..#.................#.......",b"...............#..#.......##...",b"..##..#....#...##..........#..#",b"#...###....##.#.......#.....#..",b"..........#.........#..#......#",b"##....#.....#...##.......#.....",b"..#..#.......#.................",b"..#..##......#.........#......#",b"...........##.#..#......#.#..#.",b"..#...##...##......#...#...#.#.",b".#..#.....#.........#..........",b"#..##...#............#..#.#....",b"..#...#...##.#........#....#.#.",b"......##..###.#....#........#..",b".....#..#....##...##..........#",b"................#.#.#.....#..#.",b"#.##...#......#.#..#.......###.",b".......#.#..#..#......#..##..#.",b".##...#...#....#....#.......#..",b"......#..#....#.#.###.....#.#.#",b"#....#.#...#......#.#.....#..#.",b".......#.#...#.#.#............#",b"#.....#..#...#.................",b".....#..........#..#.#..#.#....",b".........#......#.#.........###",b"..#.###........#....##.#.......",b".#.......#.#......#........#..#",b"............#........#.....#...",b"......#......#....#.#....#.....",b".#.......#.....#.##.#..#...#..#",b"##.....#...#..........##..#...#",b".#........#....#...#....##.#...",b"...#.#.......#.#....#.#...#...#",b"........#.#.....#.##...#.#.#...",b"...........#....#..#.........#.",b"......#.#..#..##...#.......#...",b"...#....#..#..#.##...........##",b".#..#.#.#......#....##...#.....",b"......#..#........#...##.......",b".............#...##.#.....#...#",b"....#...............##......#.#",b".#...........#.........###.##.#",b"....##........##...#.##.....#..",b"#......##........#...........#.",b"###.#.................#.....#..",b".....##..#.........#......##.#.",b"#.#.......##.#..#...#...#......",b"...#.#..##.....#....##.....#.#.",b"...##..#...#........#.#..#..#..",b"...........#....#...#...##.....",b"##.......#...#.#.##...##..#.#..",b"#....#.#..##...................",b".#...................#.#..#....",b"#.....#..........#..#...#...#..",b"...#..#............#.#.........",b"............#..##.....##......#",b"#....#.........#.#..#..........",b"...#.#................#....#.#.",b"..#..#...#...#.#.#...#.#.#.....",b"..#.......#.............##..#.#",b"#........#.#.###.#...#..#.###..",b".......#......#..#.....####...#",b"..##....#..#...................",b"....##.#....#......#.#..#..#..#",b"#...........##...#.#.##..###...",b"##.##......#...........#....#..",b".#....#....#..#..#...##...#....",b"...##.#.#......#...............",b".....##.##...#...........#.....",b"....#...#.#.........##.#....#.#",b"#..#...........#......#........",b"..#..#.....#....#.##.......#..#",b"..#.......##.....##.......#...#",b".#.##.#..#...............#....#",b".........#...........#.........",b"..........##......#.#..........",b"..#........###....#..#...#...#.",b"....#.#...#.....#..#....#......",b"..##...##...#..#..##......##..#",b"..#..#......#....#....#...#..##",b"...#...............#..#........",b"....##..#...#......#........#..",b"###.....##.......#.............",b".#.#.##........##..#...#.......",b".....###............#..#..#....",b".#....##.#...####........#.....",b"............#.#.....##....#.#..",b"....#..........#...#...........",b"........#.#...#..##...........#",b"#.......#..#.......###...#....#",b"#....#..#......#.....#...##.#..",b"..#.............#.#.###...##..#",b".#.#....#...#.....#...#.......#",b".##.#..#.........#..#......#...",b"#....#...#......#.....#.....#..",b"...........#....#.......##...#.",b"#.#..##....#....#.#.......#.#..",b"..............#.#..##.##.......",b"....#........#......#....#.#...",b"......#.....................#..",b"#..##...##.....#.........#.....",b"#.....#.....#....#...#.....#...",b"........###...........#...#....",b"............#.....#...##....#..",b".......#.......#...#.#...##....",b"..#.#..#....#...#...#....#.....",b"..........#.#....#....###....#.",b".##...#......###..#............",b"...#...#........#....#....##...",b"##.....#.##...#.#...........#.#",b"..........#.#....#...##.#...#..",b"..#....#.#...#...#....#.###....",b"......#.##..#..#.........#.###.",b"#.#.#.....#.....##.......#.....",b"...#..#..#....#.#....#....#....",b"##..#.#................#......#",b".....#...#..#......#..####.....",b".....##.....#....####......#...",b"..........##..###.#....#.....##",b"###...#.......#......##...#....",b".......##...#...#..#.##.#....##",b".....##.....##...##.....#..#..#",b"......#.#.....#...#....#...#...",b"..##........#...#..............",b"..#........#.##.........#...#..",b"#....#....#................#...",];
const H: usize = INPUT[0].len();

fn in_slope(dw: usize, dh: usize) -> usize {
  INPUT.iter()
    .step_by(dw)
    .zip((0..H).cycle().step_by(dh))
    .skip(1)
    .filter(|&(row, c)| row[c] == b'#')
    .count()
}

fn main() {
  let now = Instant::now();
  let part_one = in_slope(1,3);
  let part_two =
    in_slope(1,1) *
    in_slope(1,3) *
    in_slope(1,5) *
    in_slope(1,7) *
    in_slope(2,1);
  println!("{}", part_one);
  println!("{}", part_two);
  println!("Time: {}ms", now.elapsed().as_millis());
}
